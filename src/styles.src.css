/* Import only Tailwind theme and utilities, NOT base/preflight.
   The base layer contains global CSS resets (e.g., img, svg { display: block })
   that leak outside the plugin and break other Obsidian features like Bases tables.
   Since we add decorations to Obsidian's existing UI (not building from scratch),
   we only need utilities via @apply - Obsidian provides the foundation. */
@import 'tailwindcss/theme' layer(theme);
@import 'tailwindcss/utilities' layer(utilities);

/* Support section */
.support-header-margin {
    @apply mt-3;
}

/* ============================================
   Query Marker Visual Decorations
   ============================================ */

/* Line decorations for query definitions */
.dvs-query-line {
    background-color: var(--background-primary-alt);
    border-left: 3px solid var(--text-accent);
    @apply rounded-r !pl-2;
}

/* Line decorations for serialized results boundaries - faded in source mode */
.dvs-results-start-line,
.dvs-results-end-line {
    @apply opacity-30 !pl-2 text-xs italic;
    color: var(--text-faint) !important;
    white-space: nowrap;
    overflow: hidden;

    /* To improve later
    display: block;
    max-width: 20ch;
    text-overflow: ellipsis;
    */
}

/* ============================================
   Query Type Badges
   ============================================ */

.dvs-query-badge {
    @apply inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium;
    @apply ml-1 align-middle;
    font-family: var(--font-interface);
    line-height: 1;
}

.dvs-query-badge-auto {
    background-color: color-mix(in srgb, var(--color-blue) 20%, transparent);
    color: var(--color-blue);
    border: 1px solid color-mix(in srgb, var(--color-blue) 40%, transparent);
}

.dvs-query-badge-manual {
    background-color: color-mix(in srgb, var(--color-orange) 20%, transparent);
    color: var(--color-orange);
    border: 1px solid color-mix(in srgb, var(--color-orange) 40%, transparent);
}

.dvs-query-badge-once {
    background-color: color-mix(in srgb, var(--color-purple) 20%, transparent);
    color: var(--color-purple);
    border: 1px solid color-mix(in srgb, var(--color-purple) 40%, transparent);
}

.dvs-query-badge-eject {
    background-color: color-mix(in srgb, var(--color-red) 20%, transparent);
    color: var(--color-red);
    border: 1px solid color-mix(in srgb, var(--color-red) 40%, transparent);
}

/* Badge icon sizing */
.dvs-badge-icon {
    @apply flex items-center;
}

.dvs-badge-icon svg {
    @apply w-3 h-3;
}

/* ============================================
   Refresh Button (Enhanced)
   ============================================ */

.dvs-refresh-button {
    @apply inline-flex items-center justify-center align-middle cursor-pointer;
    @apply ml-2 p-1 rounded;
    @apply transition-all duration-150;
    background-color: transparent;
    color: var(--text-muted);
    border: 1px solid transparent;
}

.dvs-refresh-button:hover {
    background-color: var(--background-modifier-hover);
    color: var(--text-accent);
    border-color: var(--background-modifier-border);
}

.dvs-refresh-button:active {
    @apply scale-95;
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
}

.dvs-refresh-button svg {
    @apply w-4 h-4;
}

/* ============================================
   Widget Container
   ============================================ */

.dvs-query-widgets {
    @apply inline-flex items-center gap-1;
}

/* ============================================
   Inline Query Decorations
   ============================================ */

/* Mark decoration for inline queries */
.dvs-inline-query {
    @apply rounded px-0.5;
    background-color: color-mix(in srgb, var(--text-accent) 10%, transparent);
}

/* Inline query widget container */
.dvs-inline-query-widgets {
    @apply inline-flex items-center gap-0.5 ml-0.5;
}

/* Inline query badge (smaller than block query badge) */
.dvs-inline-badge {
    @apply inline-flex items-center p-0.5 rounded;
    font-family: var(--font-interface);
    line-height: 1;
}

.dvs-inline-badge-auto {
    background-color: color-mix(in srgb, var(--color-blue) 15%, transparent);
    color: var(--color-blue);
}

.dvs-inline-badge-manual {
    background-color: color-mix(in srgb, var(--color-orange) 15%, transparent);
    color: var(--color-orange);
}

.dvs-inline-badge-once {
    background-color: color-mix(in srgb, var(--color-purple) 15%, transparent);
    color: var(--color-purple);
}

.dvs-inline-badge-eject {
    background-color: color-mix(in srgb, var(--color-red) 15%, transparent);
    color: var(--color-red);
}

/* Inline badge icon sizing (smaller) */
.dvs-inline-badge-icon {
    @apply flex items-center;
}

.dvs-inline-badge-icon svg {
    @apply w-2.5 h-2.5;
}

/* Inline refresh button (smaller) */
.dvs-inline-refresh-button {
    @apply inline-flex items-center justify-center cursor-pointer;
    @apply p-0.5 rounded;
    @apply transition-all duration-150;
    background-color: transparent;
    color: var(--text-muted);
    border: none;
}

.dvs-inline-refresh-button:hover {
    background-color: var(--background-modifier-hover);
    color: var(--text-accent);
}

.dvs-inline-refresh-button:active {
    @apply scale-95;
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
}

.dvs-inline-refresh-button svg {
    @apply w-3 h-3;
}
